## BFF

BFF（Backend For Frontend），用中文解释就是服务于前端的后端。

<img src="/Users/bytedance/Documents/self/webKnowledge/img/流程图.jpg" alt="流程图" style="zoom:30%;" />

### 有什么用？

作为**适配层**、**API聚合层**。

**适配层**

如果我们的接口同时提供给`web`、`移动端`使用，`移动端`仅用来采集数据以及数据的展示，而`web`端大多数场景是用来管理数据，因为不同端点的业务有所不同，所以每一个端的接口复用度不会太高。

例子：比如PC端页面设计的API需要支持移动端，发现现有接口从设计到实现都与桌面UI展示需求强相关，无法简单适应移动端的展示需求 ，就好比PC端一个新闻推荐接口，接口字段PC端都需要，而移动端呢H5不需要，这个时候根据不同终端在BFF层做调整，同时也可以进行不同的（或更少的）API调用（聚合）来减少http请求。

**API聚合层**

后端同学追求解藕，因为后端可能不止一个服务，但多个服务之间有时只是有简单的业务上关系，如果能引入BFF这中间层，就使得两边可以独立变化。

例子1：用户上传头像后，用户信息的头像信息要更新，用户的头像图片需要存。如果存图片是单独一个服务，头像信息又是另一个服务，通过 BFF 就可以解决。 

例子2：比如一个用户进入页面时往往都会拉很多数据，比如他会先打请求拉自己的用户信息，再打请求拉用户的一些配置，然后页面再渲染，这样页面的首屏时间就变得缓慢。而如果引入BFF这中间层，让 BFF 层把该拿的数据合并为一个请求就返回回来，那么首屏速度就会加快。

### BFF的痛点

- 维护问题：需要维护各种 BFF 应用。以往前端也不需要关心并发，现在并发压力却集中到了 BFF 上
- 链路复杂：流程变得繁琐，BFF引入后，要同时走前端、服务端的研发流程，多端发布、互相依赖，导致流程繁琐

### 有什么方案可以解决传统BFF痛点？

- 包括解决前端需要关心应用的负载均衡、备份冗灾、监控报警等一些列运维部署的操作
- 如何统一管理和运维，提高发布速度、降低运维成本

答案是：`Serverless`